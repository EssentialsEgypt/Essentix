{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///D:/hamzaa/SocialMedia/pages/api/website-analytics/sessions.ts"],"sourcesContent":["import { NextApiRequest, NextApiResponse } from 'next'\r\n\r\n// Mock data for sessions with AI-powered behavior analysis\r\nconst mockSessions = [\r\n    {\r\n        id: '1',\r\n        sessionId: 'sess_001',\r\n        userId: 'user_123',\r\n        device: 'mobile',\r\n        source: 'social',\r\n        duration: 245,\r\n        pages: 3,\r\n        scrollDepth: 78,\r\n        rageClicks: 0,\r\n        exits: 0,\r\n        aiLabel: 'intent',\r\n        aiSummary: 'User showed strong purchase intent, viewed multiple products and spent significant time on pricing pages',\r\n        timestamp: new Date(),\r\n        revenue: 299,\r\n        products: ['product_1', 'product_2'],\r\n        userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X)',\r\n        location: 'Cairo, Egypt',\r\n        referrer: 'instagram.com'\r\n    },\r\n    {\r\n        id: '2',\r\n        sessionId: 'sess_002',\r\n        userId: 'user_456',\r\n        device: 'desktop',\r\n        source: 'organic',\r\n        duration: 89,\r\n        pages: 1,\r\n        scrollDepth: 23,\r\n        rageClicks: 2,\r\n        exits: 1,\r\n        aiLabel: 'frustration',\r\n        aiSummary: 'User experienced frustration with navigation, made multiple rage clicks and exited quickly',\r\n        timestamp: new Date(),\r\n        revenue: 0,\r\n        products: [],\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)',\r\n        location: 'Alexandria, Egypt',\r\n        referrer: 'google.com'\r\n    },\r\n    {\r\n        id: '3',\r\n        sessionId: 'sess_003',\r\n        userId: 'user_789',\r\n        device: 'mobile',\r\n        source: 'paid',\r\n        duration: 567,\r\n        pages: 5,\r\n        scrollDepth: 92,\r\n        rageClicks: 0,\r\n        exits: 0,\r\n        aiLabel: 'purchase',\r\n        aiSummary: 'User completed a purchase journey, viewed product details, reviews, and successfully checked out',\r\n        timestamp: new Date(),\r\n        revenue: 599,\r\n        products: ['product_3', 'product_4'],\r\n        userAgent: 'Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)',\r\n        location: 'Giza, Egypt',\r\n        referrer: 'facebook.com'\r\n    },\r\n    {\r\n        id: '4',\r\n        sessionId: 'sess_004',\r\n        userId: 'user_101',\r\n        device: 'tablet',\r\n        source: 'direct',\r\n        duration: 123,\r\n        pages: 2,\r\n        scrollDepth: 45,\r\n        rageClicks: 1,\r\n        exits: 0,\r\n        aiLabel: 'exploration',\r\n        aiSummary: 'User explored the site casually, viewed multiple categories but showed no strong purchase intent',\r\n        timestamp: new Date(),\r\n        revenue: 0,\r\n        products: ['product_5'],\r\n        userAgent: 'Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X)',\r\n        location: 'Sharm El Sheikh, Egypt',\r\n        referrer: 'direct'\r\n    },\r\n    {\r\n        id: '5',\r\n        sessionId: 'sess_005',\r\n        userId: 'user_202',\r\n        device: 'desktop',\r\n        source: 'email',\r\n        duration: 34,\r\n        pages: 1,\r\n        scrollDepth: 12,\r\n        rageClicks: 3,\r\n        exits: 1,\r\n        aiLabel: 'confusion',\r\n        aiSummary: 'User appeared confused by the interface, made multiple rage clicks and left quickly',\r\n        timestamp: new Date(),\r\n        revenue: 0,\r\n        products: [],\r\n        userAgent: 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)',\r\n        location: 'Luxor, Egypt',\r\n        referrer: 'mail.google.com'\r\n    }\r\n]\r\n\r\nexport default async function handler(req: NextApiRequest, res: NextApiResponse) {\r\n    if (req.method !== 'GET') {\r\n        return res.status(405).json({ error: 'Method not allowed' })\r\n    }\r\n\r\n    try {\r\n        // In a real implementation, this would:\r\n        // 1. Query your analytics database (Google Analytics, Mixpanel, etc.)\r\n        // 2. Process session data with AI for behavior analysis\r\n        // 3. Apply machine learning models for session labeling\r\n        // 4. Calculate engagement metrics and revenue attribution\r\n\r\n        // Simulate API processing delay\r\n        await new Promise(resolve => setTimeout(resolve, 100))\r\n\r\n        // Filter sessions based on query parameters\r\n        let filteredSessions = [...mockSessions]\r\n\r\n        const { device, source, aiLabel, startDate, endDate } = req.query\r\n\r\n        if (device && device !== 'all') {\r\n            filteredSessions = filteredSessions.filter(s => s.device === device)\r\n        }\r\n\r\n        if (source && source !== 'all') {\r\n            filteredSessions = filteredSessions.filter(s => s.source === source)\r\n        }\r\n\r\n        if (aiLabel && aiLabel !== 'all') {\r\n            filteredSessions = filteredSessions.filter(s => s.aiLabel === aiLabel)\r\n        }\r\n\r\n        // Calculate analytics metrics\r\n        const totalSessions = filteredSessions.length\r\n        const totalRevenue = filteredSessions.reduce((sum, s) => sum + (s.revenue || 0), 0)\r\n        const avgDuration = filteredSessions.reduce((sum, s) => sum + s.duration, 0) / totalSessions\r\n        const avgScrollDepth = filteredSessions.reduce((sum, s) => sum + s.scrollDepth, 0) / totalSessions\r\n        const totalRageClicks = filteredSessions.reduce((sum, s) => sum + s.rageClicks, 0)\r\n        const conversionRate = filteredSessions.filter(s => s.revenue > 0).length / totalSessions\r\n\r\n        // AI-powered insights\r\n        const insights = {\r\n            topBehavior: filteredSessions.reduce((acc, s) => {\r\n                acc[s.aiLabel] = (acc[s.aiLabel] || 0) + 1\r\n                return acc\r\n            }, {} as Record<string, number>),\r\n            deviceBreakdown: filteredSessions.reduce((acc, s) => {\r\n                acc[s.device] = (acc[s.device] || 0) + 1\r\n                return acc\r\n            }, {} as Record<string, number>),\r\n            sourceBreakdown: filteredSessions.reduce((acc, s) => {\r\n                acc[s.source] = (acc[s.source] || 0) + 1\r\n                return acc\r\n            }, {} as Record<string, number>)\r\n        }\r\n\r\n        return res.status(200).json({\r\n            success: true,\r\n            data: {\r\n                sessions: filteredSessions,\r\n                metrics: {\r\n                    totalSessions,\r\n                    totalRevenue,\r\n                    avgDuration: Math.round(avgDuration),\r\n                    avgScrollDepth: Math.round(avgScrollDepth),\r\n                    totalRageClicks,\r\n                    conversionRate: Math.round(conversionRate * 100) / 100\r\n                },\r\n                insights\r\n            }\r\n        })\r\n\r\n    } catch (error) {\r\n        console.error('Sessions API error:', error)\r\n        return res.status(500).json({\r\n            success: false,\r\n            error: 'Failed to load session data'\r\n        })\r\n    }\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///D:/hamzaa/SocialMedia/node_modules/next/dist/src/server/route-modules/pages-api/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/pages-api/module.js')\n} else {\n  if (process.env.NODE_ENV === 'development') {\n    if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/pages-api-turbo.runtime.dev.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/pages-api.runtime.dev.js')\n    }\n  } else {\n    if (process.env.TURBOPACK) {\n      module.exports = require('next/dist/compiled/next-server/pages-api-turbo.runtime.prod.js')\n    } else {\n      module.exports = require('next/dist/compiled/next-server/pages-api.runtime.prod.js')\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","NODE_ENV","TURBOPACK"],"mappings":"AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,QAAQ,KAAK,WAAe;QAC1C,IAAIN,QAAQC,GAAG,CAACM,SAAS,eAAE;YACzBJ,OAAOC,OAAO,GAAGC,QAAQ;QAC3B,OAAO;;QAEP;IACF,OAAO;;IAMP;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 226, "column": 0}, "map": {"version":3,"sources":["file:///D:/hamzaa/SocialMedia/node_modules/next/dist/src/server/route-kind.ts"],"sourcesContent":["export const enum RouteKind {\n  /**\n   * `PAGES` represents all the React pages that are under `pages/`.\n   */\n  PAGES = 'PAGES',\n  /**\n   * `PAGES_API` represents all the API routes under `pages/api/`.\n   */\n  PAGES_API = 'PAGES_API',\n  /**\n   * `APP_PAGE` represents all the React pages that are under `app/` with the\n   * filename of `page.{j,t}s{,x}`.\n   */\n  APP_PAGE = 'APP_PAGE',\n  /**\n   * `APP_ROUTE` represents all the API routes and metadata routes that are under `app/` with the\n   * filename of `route.{j,t}s{,x}`.\n   */\n  APP_ROUTE = 'APP_ROUTE',\n\n  /**\n   * `IMAGE` represents all the images that are generated by `next/image`.\n   */\n  IMAGE = 'IMAGE',\n}\n"],"names":["RouteKind"],"mappings":";;;AAAO,IAAWA,YAAAA,WAAAA,GAAAA,SAAAA,SAAAA;IAChB;;GAEC,GAAA,SAAA,CAAA,QAAA,GAAA;IAED;;GAEC,GAAA,SAAA,CAAA,YAAA,GAAA;IAED;;;GAGC,GAAA,SAAA,CAAA,WAAA,GAAA;IAED;;;GAGC,GAAA,SAAA,CAAA,YAAA,GAAA;IAGD;;GAEC,GAAA,SAAA,CAAA,QAAA,GAAA;WAtBeA;MAwBjB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 255, "column": 0}, "map": {"version":3,"sources":["file:///D:/hamzaa/SocialMedia/node_modules/next/dist/src/build/templates/helpers.ts"],"sourcesContent":["/**\n * Hoists a name from a module or promised module.\n *\n * @param module the module to hoist the name from\n * @param name the name to hoist\n * @returns the value on the module (or promised module)\n */\nexport function hoist(module: any, name: string) {\n  // If the name is available in the module, return it.\n  if (name in module) {\n    return module[name]\n  }\n\n  // If a property called `then` exists, assume it's a promise and\n  // return a promise that resolves to the name.\n  if ('then' in module && typeof module.then === 'function') {\n    return module.then((mod: any) => hoist(mod, name))\n  }\n\n  // If we're trying to hoise the default export, and the module is a function,\n  // return the module itself.\n  if (typeof module === 'function' && name === 'default') {\n    return module\n  }\n\n  // Otherwise, return undefined.\n  return undefined\n}\n"],"names":["hoist","module","name","then","mod","undefined"],"mappings":"AAAA;;;;;;CAMC,GACD;;;AAAO,SAASA,MAAMC,MAAW,EAAEC,IAAY;IAC7C,qDAAqD;IACrD,IAAIA,QAAQD,QAAQ;QAClB,OAAOA,MAAM,CAACC,KAAK;IACrB;IAEA,gEAAgE;IAChE,8CAA8C;IAC9C,IAAI,UAAUD,UAAU,OAAOA,OAAOE,IAAI,KAAK,YAAY;QACzD,OAAOF,OAAOE,IAAI,CAAC,CAACC,MAAaJ,MAAMI,KAAKF;IAC9C;IAEA,6EAA6E;IAC7E,4BAA4B;IAC5B,IAAI,OAAOD,WAAW,cAAcC,SAAS,WAAW;QACtD,OAAOD;IACT;IAEA,+BAA+B;IAC/B,OAAOI;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 288, "column": 0}, "map": {"version":3,"sources":["file:///D:/hamzaa/SocialMedia/node_modules/next/dist/src/build/templates/pages-api.ts"],"sourcesContent":["import { PagesAPIRouteModule } from '../../server/route-modules/pages-api/module.compiled'\nimport { RouteKind } from '../../server/route-kind'\n\nimport { hoist } from './helpers'\n\n// Import the userland code.\nimport * as userland from 'VAR_USERLAND'\n\n// Re-export the handler (should be the default export).\nexport default hoist(userland, 'default')\n\n// Re-export config.\nexport const config = hoist(userland, 'config')\n\n// Create and export the route module that will be consumed.\nexport const routeModule = new PagesAPIRouteModule({\n  definition: {\n    kind: RouteKind.PAGES_API,\n    page: 'VAR_DEFINITION_PAGE',\n    pathname: 'VAR_DEFINITION_PATHNAME',\n    // The following aren't used in production.\n    bundlePath: '',\n    filename: '',\n  },\n  userland,\n})\n"],"names":["PagesAPIRouteModule","RouteKind","hoist","userland","config","routeModule","definition","kind","PAGES_API","page","pathname","bundlePath","filename"],"mappings":";;;;;AAAA,SAASA,mBAAmB,QAAQ,uDAAsD;AAC1F,SAASC,SAAS,QAAQ,0BAAyB;AAEnD,SAASC,KAAK,QAAQ,YAAW;AAEjC,4BAA4B;AAC5B,YAAYC,cAAc,eAAc;;;;;yMAGzBD,QAAAA,EAAMC,2IAAU,WAAU;AAGlC,MAAMC,2KAASF,QAAAA,EAAMC,2IAAU,UAAS;AAGxC,MAAME,cAAc,qMAAIL,sBAAAA,CAAoB;IACjDM,YAAY;QACVC,8JAAMN,YAAAA,CAAUO,SAAS;QACzBC,MAAM;QACNC,UAAU;QACV,2CAA2C;QAC3CC,YAAY;QACZC,UAAU;IACZ;cACAT;AACF,GAAE","ignoreList":[0],"debugId":null}}]
}