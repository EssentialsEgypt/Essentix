"use strict";exports.id=8855,exports.ids=[8855],exports.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return s}});var s=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,s)=>{e.exports=s(75600)},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,s){return s in t?t[s]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,s)):"function"==typeof t&&"default"===s?t:void 0}}})},90492:(e,t,s)=>{s.d(t,{B:()=>n});class a{constructor(){this.templates=[],this.platformConfigs=[],this.isActive=!0,this.loadDefaultTemplates(),this.loadPlatformConfigs()}loadDefaultTemplates(){this.templates=[{id:"faq-shipping",name:"Shipping Information",category:"FAQ",intent:["question","request"],platforms:["instagram","whatsapp","email"],template:"Hi {name}! Shipping takes 2-3 business days within Egypt. International shipping available. Track your order at {tracking_link}",variables:["name","tracking_link"],tone:"helpful",isActive:!0,usageCount:0,successRate:0,lastUsed:new Date},{id:"vip-greeting",name:"VIP Customer Greeting",category:"VIP",intent:["hype","general"],platforms:["instagram","whatsapp"],template:"Hey {name}! \uD83D\uDC51 VIP access granted. What can we help you with today?",variables:["name"],tone:"excited",isActive:!0,usageCount:0,successRate:0,lastUsed:new Date},{id:"drop-hype",name:"Drop Hype Response",category:"Marketing",intent:["hype","drop_inquiry"],platforms:["instagram","whatsapp"],template:"\uD83D\uDD25 {name}, you know what's coming! Next drop: {drop_date}. Set your alarms!",variables:["name","drop_date"],tone:"excited",isActive:!0,usageCount:0,successRate:0,lastUsed:new Date},{id:"support-escalation",name:"Support Escalation",category:"Support",intent:["complaint","support"],platforms:["instagram","whatsapp","email"],template:"I understand your concern, {name}. Let me connect you with our support team right away. They'll reach out within 10 minutes.",variables:["name"],tone:"professional",isActive:!0,usageCount:0,successRate:0,lastUsed:new Date},{id:"order-tracking",name:"Order Tracking",category:"Orders",intent:["order_tracking","request"],platforms:["instagram","whatsapp","email"],template:"Hi {name}! Your order #{order_number} is {status}. Track it here: {tracking_link}",variables:["name","order_number","status","tracking_link"],tone:"helpful",isActive:!0,usageCount:0,successRate:0,lastUsed:new Date}]}loadPlatformConfigs(){this.platformConfigs=[{platform:"instagram",apiKey:process.env.INSTAGRAM_API_KEY||"",responseDelay:3e3,typingIndicator:!0,maxResponseLength:1e3,supportedFeatures:["dm","comments","stories"]},{platform:"whatsapp",apiKey:process.env.WHATSAPP_API_KEY||"",responseDelay:2e3,typingIndicator:!0,maxResponseLength:1e3,supportedFeatures:["messages","status"]},{platform:"email",apiKey:process.env.EMAIL_API_KEY||"",responseDelay:5e3,typingIndicator:!1,maxResponseLength:2e3,supportedFeatures:["inbox","outbox"]}]}async processMessage(e,t,s,a){let n=Date.now(),r=await this.detectIntent(e,a),o=a||await this.getSenderContext(t,s),i=await this.generateResponse(e,r,o,s);await this.applyResponseDelay(s);let p=await this.sendResponse(i,t,s),l=Date.now()-n,u={id:`reply_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,originalMessageId:`msg_${Date.now()}`,senderId:t,platform:s,intent:r,response:p?i:"Failed to send",templateUsed:r.suggestedResponse,wasEdited:!1,wasApproved:!1,responseTime:l,sentAt:new Date,tags:r.tags,escalationTriggered:r.requiresHumanEscalation};return await this.logResponse(u),u}async detectIntent(e,t){let s=e.toLowerCase(),a={type:"general",confidence:.7,urgency:"low",emotionalTone:"neutral",requiresHumanEscalation:!1,suggestedResponse:"",tags:[]};return s.includes("ship")||s.includes("delivery")||s.includes("when")?(a.type="question",a.tags.push("shipping"),a.suggestedResponse="faq-shipping"):s.includes("order")||s.includes("track")?(a.type="order_tracking",a.tags.push("order"),a.suggestedResponse="order-tracking"):s.includes("drop")||s.includes("release")||s.includes("\uD83D\uDD25")?(a.type="drop_inquiry",a.tags.push("drop","marketing"),a.suggestedResponse="drop-hype"):s.includes("problem")||s.includes("issue")||s.includes("wrong")?(a.type="complaint",a.urgency="high",a.emotionalTone="negative",a.requiresHumanEscalation=!0,a.tags.push("support","escalation"),a.suggestedResponse="support-escalation"):(s.includes("love")||s.includes("\uD83D\uDD25")||s.includes("amazing"))&&(a.type="hype",a.emotionalTone="positive",a.tags.push("engagement"),a.suggestedResponse=t?.isVIP?"vip-greeting":"drop-hype"),t?.isVIP&&(a.confidence+=.1,a.tags.push("vip")),t?.hasOrderedRecently&&a.tags.push("returning_customer"),a}async getSenderContext(e,t){return{id:e,platform:t,isVIP:Math.random()>.8,isFirstTime:Math.random()>.7,hasOrderedRecently:Math.random()>.6,hasCommentedBefore:Math.random()>.5,lastInteractionDate:new Date(Date.now()-7*Math.random()*864e5),totalInteractions:Math.floor(20*Math.random())+1,averageResponseTime:Math.floor(5e3*Math.random())+1e3,preferredLanguage:"en",timezone:"Africa/Cairo",customerSegment:Math.random()>.8?"vip":Math.random()>.6?"hot":Math.random()>.4?"warm":"cold"}}async generateResponse(e,t,s,a){let n="";if(t.suggestedResponse){let a=this.templates.find(e=>e.id===t.suggestedResponse);a&&a.isActive&&(n=this.fillTemplate(a,s,e))}n||(n=await this.generateNewResponse(e,t,s,a)),n=this.adaptTone(n,t.emotionalTone,s);let r=this.platformConfigs.find(e=>e.platform===a);return r&&n.length>r.maxResponseLength&&(n=n.substring(0,r.maxResponseLength-3)+"..."),n}fillTemplate(e,t,s){let a=e.template;return e.variables.includes("name")&&(a=a.replace("{name}",t.id.split("_")[0]||"there")),e.variables.includes("tracking_link")&&(a=a.replace("{tracking_link}","https://track.essentials-egypt.com")),e.variables.includes("drop_date")&&(a=a.replace("{drop_date}","Friday 3 PM Cairo Time")),e.variables.includes("order_number")&&(a=a.replace("{order_number}","#"+Math.floor(1e4*Math.random()))),e.variables.includes("status")&&(a=a.replace("{status}","in transit")),a}async generateNewResponse(e,t,s,a){let n={question:"Thanks for asking! Let me help you with that.",complaint:"I understand your concern. Let me get this sorted for you.",hype:"\uD83D\uDD25 Love the energy! Thanks for the support!",confusion:"No worries, let me clarify that for you.",request:"I'll help you with that right away.",order_tracking:"Let me check your order status for you.",product_info:"Here's what you need to know about that product.",support:"I'm here to help! Let me assist you with that.",drop_inquiry:"\uD83D\uDD25 New drops coming soon! Stay tuned!",general:"Thanks for reaching out! How can I help you today?"};return n[t.type]||n.general}adaptTone(e,t,s){switch(s.isVIP&&(e="\uD83D\uDC51 "+e),t){case"positive":e+=" \uD83D\uDE0A";break;case"excited":e+=" \uD83D\uDD25";break;case"negative":e="I understand your concern. "+e;break;case"frustrated":e="I'm sorry to hear that. "+e}return e}async applyResponseDelay(e){let t=this.platformConfigs.find(t=>t.platform===e),s=(t?.responseDelay||3e3)+(Math.random()-.5)*2e3;await new Promise(e=>setTimeout(e,s))}async sendResponse(e,t,s){return console.log(`Sending response to ${t} on ${s}: ${e}`),await new Promise(e=>setTimeout(e,500)),Math.random()>.1}async logResponse(e){console.log("Auto Reply Logged:",{id:e.id,platform:e.platform,intent:e.intent.type,responseTime:e.responseTime,tags:e.tags})}async getAnalytics(){return{totalResponses:1247,averageResponseTime:3200,successRate:.94,escalationRate:.12,platformBreakdown:{instagram:45,whatsapp:35,email:20},intentBreakdown:{question:30,complaint:15,hype:25,order_tracking:20,general:10},topTemplates:this.templates.slice(0,5),recentResponses:[]}}async addTemplate(e){let t={...e,id:`template_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,usageCount:0,successRate:0,lastUsed:new Date};return this.templates.push(t),t}async updateTemplate(e,t){let s=this.templates.findIndex(t=>t.id===e);return -1===s?null:(this.templates[s]={...this.templates[s],...t},this.templates[s])}async toggleSystem(e){this.isActive=e}isSystemActive(){return this.isActive}async getTemplates(){return this.templates}async getPlatformConfigs(){return this.platformConfigs}}let n=new a}};