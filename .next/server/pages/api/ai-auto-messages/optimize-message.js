"use strict";(()=>{var e={};e.id=392,e.ids=[392],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},31555:(e,t,n)=>{n.r(t),n.d(t,{config:()=>p,default:()=>d,routeModule:()=>g});var o={};n.r(o),n.d(o,{default:()=>u});var i=n(33480),a=n(8667),r=n(86435);let s={openRate:{excellent:.35,good:.25,average:.15,poor:.1},clickRate:{excellent:.15,good:.1,average:.05,poor:.02},conversionRate:{excellent:.08,good:.05,average:.03,poor:.01}},c={low_open_rate:["Add urgency with time-sensitive language","Include emojis to increase visual appeal","Use personalized greeting","Add social proof elements"],low_click_rate:["Include clear call-to-action","Add benefit-focused language","Include scarcity indicators","Use action-oriented verbs"],low_conversion_rate:["Add trust signals and guarantees","Include specific product benefits","Add urgency with limited availability","Include customer testimonials"],high_bounce_rate:["Simplify message structure","Remove unnecessary complexity","Focus on single clear message","Use shorter, punchier language"]},l={add_urgency:e=>e.includes("limited")||e.includes("only")||e.includes("last")?e:e+" Limited time offer! ⏰",add_emojis:e=>{let t=e;return Object.entries({cart:"\uD83D\uDED2",sale:"\uD83D\uDCB0",new:"\uD83C\uDD95",exclusive:"\uD83D\uDC51",urgent:"⚡",help:"\uD83E\uDD1D"}).forEach(([n,o])=>{e.toLowerCase().includes(n)&&(t=t.replace(RegExp(n,"gi"),`${n} ${o}`))}),t},add_personalization:e=>e.includes("you")||e.includes("your")?e:e.replace(/^(Hey|Hi|Hello)/,"$1! We noticed you"),add_cta:e=>e.includes("click")||e.includes("buy")||e.includes("order")?e:e+" Click here to complete your purchase! \uD83D\uDED2",add_social_proof:e=>e.includes("customers")||e.includes("reviews")?e:e+" Join 10,000+ satisfied customers! ⭐"};async function u(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{var n;let o,{messageId:i,performanceData:a,customerFeedback:r}=e.body;if(!i||!a)return t.status(400).json({error:"Missing required fields"});let u=function(e){let t=[];return e.openRate<s.openRate.average&&t.push("low_open_rate"),e.clickRate<s.clickRate.average&&t.push("low_click_rate"),e.conversionRate<s.conversionRate.average&&t.push("low_conversion_rate"),t}(a),d=function(e){let t=[];return e.forEach(e=>{let n=c[e]||[];t.push(...n)}),t}(u),p=(n="Hey! We noticed you're interested in our BAPE Shark Hoodie",o=n,u.includes("low_open_rate")&&(o=l.add_emojis(o),o=l.add_personalization(o)),u.includes("low_click_rate")&&(o=l.add_cta(o)),u.includes("low_conversion_rate")&&(o=l.add_urgency(o),o=l.add_social_proof(o)),o),g=function(e,t){let n={openRate:0,clickRate:0,conversionRate:0};return t.includes("low_open_rate")&&(n.openRate=Math.min(.15,.5*e.openRate)),t.includes("low_click_rate")&&(n.clickRate=Math.min(.08,.6*e.clickRate)),t.includes("low_conversion_rate")&&(n.conversionRate=Math.min(.04,.7*e.conversionRate)),{openRate:e.openRate+n.openRate,clickRate:e.clickRate+n.clickRate,conversionRate:e.conversionRate+n.conversionRate,improvement:Object.values(n).reduce((e,t)=>e+t,0)}}(a,u);return console.log("AI Message Optimization:",{messageId:i,originalPerformance:a,gaps:u,suggestedChanges:d,optimizedMessage:p,predictedPerformance:g,timestamp:new Date().toISOString()}),t.status(200).json({optimizedMessage:p,suggestedChanges:d,predictedPerformance:g})}catch(e){return console.error("Error optimizing message:",e),t.status(500).json({error:"Failed to optimize message"})}}let d=(0,r.M)(o,"default"),p=(0,r.M)(o,"config"),g=new i.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/ai-auto-messages/optimize-message",pathname:"/api/ai-auto-messages/optimize-message",bundlePath:"",filename:""},userland:o})},33480:(e,t,n)=>{e.exports=n(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=31555);module.exports=n})();