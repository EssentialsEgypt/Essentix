"use strict";(()=>{var e={};e.id=4608,e.ids=[4608],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,n)=>{e.exports=n(75600)},64631:(e,t,n)=>{n.r(t),n.d(t,{config:()=>c,default:()=>g,routeModule:()=>l});var r={};n.r(r),n.d(r,{default:()=>u});var i=n(33480),o=n(8667),a=n(86435);let s={casual:{en:{greeting:"Hey",urgency:"Don't sleep on this",emoji:"\uD83D\uDD25"},ar:{greeting:"يا",urgency:"ما تفوتش",emoji:"\uD83D\uDD25"}},friendly:{en:{greeting:"Hi there",urgency:"Don't miss out",emoji:"\uD83D\uDE0A"},ar:{greeting:"أهلاً",urgency:"ما تفوتش",emoji:"\uD83D\uDE0A"}},professional:{en:{greeting:"Hello",urgency:"Limited time offer",emoji:""},ar:{greeting:"مرحباً",urgency:"عرض محدود",emoji:""}},loyalty:{en:{greeting:"Dear valued customer",urgency:"Exclusive VIP access",emoji:"\uD83D\uDC51"},ar:{greeting:"عزيزي العميل",urgency:"وصول حصري للعملاء المميزين",emoji:"\uD83D\uDC51"}}};async function u(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{customerId:n,message:r,language:i="en",tone:o="friendly",duration:a}=e.body;if(!n||!r)return t.status(400).json({error:"Missing required fields"});let u=function(e,t,n){let r=s[t]?.[n]||s.friendly[n],i=e;return e.toLowerCase().includes(r.greeting.toLowerCase())||(i=`${r.greeting}, ${i}`),(e.toLowerCase().includes("cart")||e.toLowerCase().includes("checkout"))&&(i+=` ${r.urgency}.`),r.emoji&&"professional"!==t&&(i+=` ${r.emoji}`),i}(r,o,i),g=a||function(e,t){let n=e.split(" ").length;return Math.max(10,Math.min(30,Math.round(n/("en"===t?150:120)*60)))}(u,i),c=function(e,t,n){let r=Date.now(),i=Buffer.from(t).toString("base64").substring(0,8);return`https://api.example.com/voice/${e}/${r}_${i}.mp3`}(n,u,0),l={id:Date.now().toString(),actionId:e.body.actionId||"default",customerId:n,message:u,voiceUrl:c,duration:g,language:i,tone:o,isGenerated:!0,createdAt:new Date};return console.log("AI Voice Message Generated:",{customerId:n,originalMessage:r,optimizedMessage:l.message,tone:l.tone,language:l.language,duration:l.duration,voiceUrl:l.voiceUrl,timestamp:new Date().toISOString()}),await new Promise(e=>setTimeout(e,1e3)),t.status(200).json(l)}catch(e){return console.error("Error generating voice message:",e),t.status(500).json({error:"Failed to generate voice message"})}}let g=(0,a.M)(r,"default"),c=(0,a.M)(r,"config"),l=new i.PagesAPIRouteModule({definition:{kind:o.A.PAGES_API,page:"/api/ai-auto-messages/voice-messages",pathname:"/api/ai-auto-messages/voice-messages",bundlePath:"",filename:""},userland:r})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,n){return n in t?t[n]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,n)):"function"==typeof t&&"default"===n?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var n=t(t.s=64631);module.exports=n})();