"use strict";(()=>{var e={};e.id=9953,e.ids=[9953],e.modules={8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return n}});var n=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},29822:(e,r,n)=>{n.r(r),n.d(r,{config:()=>p,default:()=>d,routeModule:()=>v});var o={};n.r(o),n.d(o,{default:()=>a});var s=n(33480),t=n(8667),i=n(86435);let c={sessions:[{device:"mobile",count:3568,conversion:8.2},{device:"desktop",count:1672,conversion:4.1},{device:"tablet",count:234,conversion:6.8}],dropoffs:[{page:"/collections/hoodies",rate:36.5,impact:18500},{page:"/products/bape-shark-hoodie",rate:28.3,impact:12500},{page:"/checkout",rate:18.7,impact:8500}],products:[{name:"BAPE Shark Hoodie",views:1247,conversions:78,revenue:97500},{name:"Supreme Box Logo Tee",views:892,conversions:37,revenue:46250},{name:"Nike Air Force 1",views:1567,conversions:94,revenue:117500}],revenue:[{source:"Instagram",amount:42500,conversion:8.9},{source:"Google",amount:28750,conversion:6.2},{source:"TikTok",amount:52100,conversion:12.4}],competitors:[{metric:"bounce_rate",your_value:38.7,industry_avg:45.2,difference:-14.4},{metric:"aov",your_value:1250,industry_avg:850,difference:47.1},{metric:"retention",your_value:18.7,industry_avg:12.3,difference:52}]};async function a(e,r){if("POST"===e.method)try{let{query:n,language:o="en"}=e.body;if(!n)return r.status(400).json({success:!1,error:"Query is required"});let s=await u(n,o),t={id:Date.now().toString(),user_id:"user_123",query:n,response:s.response,metrics_returned:s.metrics,graphs_generated:s.graphs,language:o,created_at:new Date().toISOString()};r.status(200).json({success:!0,data:t,ai_analysis:s})}catch(e){r.status(500).json({success:!1,error:"Failed to process query"})}else r.setHeader("Allow",["POST"]),r.status(405).json({success:!1,error:`Method ${e.method} Not Allowed`})}async function u(e,r){let n=e.toLowerCase();if(n.includes("trending")||n.includes("popular")){var o,s=0,t=r;let e=c.products[0];return{response:"ar"===t?`أفضل المنتجات أداءً هذا الأسبوع هو ${e.name} مع ${e.views} مشاهدة و ${e.conversions} تحويل و ${e.revenue} جنيه إيرادات.`:`The top trending product this week is ${e.name} with ${e.views} views, ${e.conversions} conversions, and ${e.revenue} EGP in revenue.`,metrics:{product_name:e.name,views:e.views,conversions:e.conversions,revenue:e.revenue},graphs:["product_performance_chart.png"],confidence:.92}}if(n.includes("mobile")||n.includes("desktop")){var i=0,a=r;let e=c.sessions.find(e=>"mobile"===e.device),n=c.sessions.find(e=>"desktop"===e.device);return{response:"ar"===a?`مقارنة الأجهزة: الهاتف المحمول لديه ${e?.count} جلسة مع معدل تحويل ${e?.conversion}%، بينما سطح المكتب لديه ${n?.count} جلسة مع معدل تحويل ${n?.conversion}%.`:`Device comparison: Mobile has ${e?.count} sessions with ${e?.conversion}% conversion rate, while desktop has ${n?.count} sessions with ${n?.conversion}% conversion rate.`,metrics:{mobile:e,desktop:n,difference:e&&n?e.conversion-n.conversion:0},graphs:["device_comparison_chart.png"],confidence:.89}}if(n.includes("drop")||n.includes("exit")){var u=0,d=r;let e=c.dropoffs.reduce((e,r)=>e.rate>r.rate?e:r);return{response:"ar"===d?`أعلى معدل انسحاب هو ${e.rate}% في صفحة ${e.page} مع تأثير إيرادات ${e.impact} جنيه.`:`The highest drop-off rate is ${e.rate}% on page ${e.page} with ${e.impact} EGP revenue impact.`,metrics:{worst_dropoff:e,total_dropoffs:c.dropoffs.length,average_rate:c.dropoffs.reduce((e,r)=>e+r.rate,0)/c.dropoffs.length},graphs:["dropoff_analysis_chart.png"],confidence:.91}}if(n.includes("competitor")||n.includes("compare")){var p=0,v=r;let e=c.competitors.reduce((e,r)=>e.difference>r.difference?e:r);return{response:"ar"===v?`أفضل أداء مقارنة بالمنافسين هو ${e.metric.replace("_"," ")} حيث نحن ${e.difference>0?"أفضل":"أسوأ"} بنسبة ${Math.abs(e.difference)}% من المتوسط الصناعي.`:`Best performance vs competitors is ${e.metric.replace("_"," ")} where we are ${e.difference>0?"better":"worse"} by ${Math.abs(e.difference)}% than industry average.`,metrics:{best_metric:e,all_metrics:c.competitors,average_difference:c.competitors.reduce((e,r)=>e+r.difference,0)/c.competitors.length},graphs:["competitor_benchmark_chart.png"],confidence:.87}}if(n.includes("revenue")||n.includes("sales")){var l=0,f=r;let e=c.revenue.reduce((e,r)=>e+r.amount,0),n=c.revenue.reduce((e,r)=>e.amount>r.amount?e:r);return{response:"ar"===f?`إجمالي الإيرادات هو ${e} جنيه. أفضل مصدر للدخل هو ${n.source} مع ${n.amount} جنيه و ${n.conversion}% معدل تحويل.`:`Total revenue is ${e} EGP. Best revenue source is ${n.source} with ${n.amount} EGP and ${n.conversion}% conversion rate.`,metrics:{total_revenue:e,best_source:n,revenue_breakdown:c.revenue},graphs:["revenue_breakdown_chart.png"],confidence:.94}}else if(n.includes("conversion")||n.includes("convert")){var m=0,h=r;let e=c.sessions.reduce((e,r)=>e+r.count,0),n=c.sessions.reduce((e,r)=>e+r.count*r.conversion/100,0),o=(n/e*100).toFixed(1);return{response:"ar"===h?`معدل التحويل الإجمالي هو ${o}%. الهاتف المحمول لديه أعلى معدل تحويل بنسبة ${c.sessions.find(e=>"mobile"===e.device)?.conversion}%.`:`Overall conversion rate is ${o}%. Mobile has the highest conversion rate at ${c.sessions.find(e=>"mobile"===e.device)?.conversion}%.`,metrics:{overall_conversion:o,total_sessions:e,total_conversions:n,device_breakdown:c.sessions},graphs:["conversion_analysis_chart.png"],confidence:.9}}else{return o=0,{response:"ar"===r?`أهلاً! يمكنني مساعدتك في تحليل بيانات موقع الويب. اسأل عن الاتجاهات، التحويلات، الانسحابات، أو مقارنة المنافسين.`:"Hello! I can help you analyze website analytics data. Ask about trends, conversions, drop-offs, or competitor comparisons.",metrics:{available_queries:["trending products","mobile vs desktop performance","drop-off analysis","competitor benchmarks","revenue breakdown","conversion rates"]},graphs:[],confidence:.85}}}let d=(0,i.M)(o,"default"),p=(0,i.M)(o,"config"),v=new s.PagesAPIRouteModule({definition:{kind:t.A.PAGES_API,page:"/api/website-analytics/chatbot",pathname:"/api/website-analytics/chatbot",bundlePath:"",filename:""},userland:o})},33480:(e,r,n)=>{e.exports=n(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,n){return n in r?r[n]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,n)):"function"==typeof r&&"default"===n?r:void 0}}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var n=r(r.s=29822);module.exports=n})();