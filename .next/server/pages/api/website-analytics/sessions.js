"use strict";(()=>{var e={};e.id=395,e.ids=[395],e.modules={8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},12022:(e,r,t)=>{t.r(r),t.d(r,{config:()=>l,default:()=>c,routeModule:()=>d});var s={};t.r(s),t.d(s,{default:()=>u});var i=t(33480),a=t(8667),o=t(86435);let n=[{id:"1",sessionId:"sess_001",userId:"user_123",device:"mobile",source:"social",duration:245,pages:3,scrollDepth:78,rageClicks:0,exits:0,aiLabel:"intent",aiSummary:"User showed strong purchase intent, viewed multiple products and spent significant time on pricing pages",timestamp:new Date,revenue:299,products:["product_1","product_2"],userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X)",location:"Cairo, Egypt",referrer:"instagram.com"},{id:"2",sessionId:"sess_002",userId:"user_456",device:"desktop",source:"organic",duration:89,pages:1,scrollDepth:23,rageClicks:2,exits:1,aiLabel:"frustration",aiSummary:"User experienced frustration with navigation, made multiple rage clicks and exited quickly",timestamp:new Date,revenue:0,products:[],userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",location:"Alexandria, Egypt",referrer:"google.com"},{id:"3",sessionId:"sess_003",userId:"user_789",device:"mobile",source:"paid",duration:567,pages:5,scrollDepth:92,rageClicks:0,exits:0,aiLabel:"purchase",aiSummary:"User completed a purchase journey, viewed product details, reviews, and successfully checked out",timestamp:new Date,revenue:599,products:["product_3","product_4"],userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 15_0 like Mac OS X)",location:"Giza, Egypt",referrer:"facebook.com"},{id:"4",sessionId:"sess_004",userId:"user_101",device:"tablet",source:"direct",duration:123,pages:2,scrollDepth:45,rageClicks:1,exits:0,aiLabel:"exploration",aiSummary:"User explored the site casually, viewed multiple categories but showed no strong purchase intent",timestamp:new Date,revenue:0,products:["product_5"],userAgent:"Mozilla/5.0 (iPad; CPU OS 14_7_1 like Mac OS X)",location:"Sharm El Sheikh, Egypt",referrer:"direct"},{id:"5",sessionId:"sess_005",userId:"user_202",device:"desktop",source:"email",duration:34,pages:1,scrollDepth:12,rageClicks:3,exits:1,aiLabel:"confusion",aiSummary:"User appeared confused by the interface, made multiple rage clicks and left quickly",timestamp:new Date,revenue:0,products:[],userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7)",location:"Luxor, Egypt",referrer:"mail.google.com"}];async function u(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});try{await new Promise(e=>setTimeout(e,100));let t=[...n],{device:s,source:i,aiLabel:a,startDate:o,endDate:u}=e.query;s&&"all"!==s&&(t=t.filter(e=>e.device===s)),i&&"all"!==i&&(t=t.filter(e=>e.source===i)),a&&"all"!==a&&(t=t.filter(e=>e.aiLabel===a));let c=t.length,l=t.reduce((e,r)=>e+(r.revenue||0),0),d=t.reduce((e,r)=>e+r.duration,0)/c,p=t.reduce((e,r)=>e+r.scrollDepth,0)/c,m=t.reduce((e,r)=>e+r.rageClicks,0),g=t.filter(e=>e.revenue>0).length/c,h={topBehavior:t.reduce((e,r)=>(e[r.aiLabel]=(e[r.aiLabel]||0)+1,e),{}),deviceBreakdown:t.reduce((e,r)=>(e[r.device]=(e[r.device]||0)+1,e),{}),sourceBreakdown:t.reduce((e,r)=>(e[r.source]=(e[r.source]||0)+1,e),{})};return r.status(200).json({success:!0,data:{sessions:t,metrics:{totalSessions:c,totalRevenue:l,avgDuration:Math.round(d),avgScrollDepth:Math.round(p),totalRageClicks:m,conversionRate:Math.round(100*g)/100},insights:h}})}catch(e){return console.error("Sessions API error:",e),r.status(500).json({success:!1,error:"Failed to load session data"})}}let c=(0,o.M)(s,"default"),l=(0,o.M)(s,"config"),d=new i.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/website-analytics/sessions",pathname:"/api/website-analytics/sessions",bundlePath:"",filename:""},userland:s})},33480:(e,r,t)=>{e.exports=t(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=12022);module.exports=t})();