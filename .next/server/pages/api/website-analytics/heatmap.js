"use strict";(()=>{var e={};e.id=1968,e.ids=[1968],e.modules={8667:(e,n)=>{Object.defineProperty(n,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,n,o)=>{e.exports=o(75600)},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},77934:(e,n,o)=>{o.r(n),o.d(n,{config:()=>v,default:()=>d,routeModule:()=>u});var r={};o.r(r),o.d(r,{default:()=>s});var c=o(33480),t=o(8667),i=o(86435);let a=[{zone:"Best Sellers Section",clicks:450,revenue:38e3,conversionRate:.084,heatLevel:"hot",products:["product_1","product_2","product_3"],aiInsight:"High-performing section with strong product placement and social proof",lastUpdated:new Date,deviceBreakdown:{mobile:{clicks:280,revenue:24500,conversionRate:.087},desktop:{clicks:120,revenue:9800,conversionRate:.082},tablet:{clicks:50,revenue:3700,conversionRate:.074}},timeBreakdown:{"00:00-06:00":{clicks:45,revenue:3800,conversionRate:.084},"06:00-12:00":{clicks:89,revenue:7600,conversionRate:.085},"12:00-18:00":{clicks:156,revenue:13200,conversionRate:.085},"18:00-24:00":{clicks:160,revenue:13400,conversionRate:.084}},productPerformance:[{productId:"prod_001",name:"Limited Hoodie",clicks:156,revenue:13400,conversionRate:.086},{productId:"prod_002",name:"BAPE Tee",clicks:134,revenue:11500,conversionRate:.086},{productId:"prod_003",name:"Sneakers",clicks:160,revenue:13100,conversionRate:.082}]},{zone:"Header Navigation",clicks:320,revenue:12e3,conversionRate:.037,heatLevel:"warm",products:["product_4","product_5"],aiInsight:"Good visibility but could benefit from more prominent CTA placement",lastUpdated:new Date,deviceBreakdown:{mobile:{clicks:200,revenue:7500,conversionRate:.038},desktop:{clicks:100,revenue:3800,conversionRate:.038},tablet:{clicks:20,revenue:700,conversionRate:.035}},timeBreakdown:{"00:00-06:00":{clicks:32,revenue:1200,conversionRate:.038},"06:00-12:00":{clicks:64,revenue:2400,conversionRate:.038},"12:00-18:00":{clicks:112,revenue:4200,conversionRate:.038},"18:00-24:00":{clicks:112,revenue:4200,conversionRate:.038}},productPerformance:[{productId:"prod_004",name:"Accessories",clicks:180,revenue:6800,conversionRate:.038},{productId:"prod_005",name:"New Arrivals",clicks:140,revenue:5200,conversionRate:.037}]},{zone:"Product Grid",clicks:280,revenue:8900,conversionRate:.032,heatLevel:"warm",products:["product_6","product_7","product_8"],aiInsight:"Moderate performance, consider optimizing product images and descriptions",lastUpdated:new Date,deviceBreakdown:{mobile:{clicks:175,revenue:5600,conversionRate:.032},desktop:{clicks:88,revenue:2800,conversionRate:.032},tablet:{clicks:17,revenue:500,conversionRate:.029}},timeBreakdown:{"00:00-06:00":{clicks:28,revenue:890,conversionRate:.032},"06:00-12:00":{clicks:56,revenue:1780,conversionRate:.032},"12:00-18:00":{clicks:98,revenue:3115,conversionRate:.032},"18:00-24:00":{clicks:98,revenue:3115,conversionRate:.032}},productPerformance:[{productId:"prod_006",name:"Casual Wear",clicks:120,revenue:3800,conversionRate:.032},{productId:"prod_007",name:"Streetwear",clicks:100,revenue:3200,conversionRate:.032},{productId:"prod_008",name:"Limited Edition",clicks:60,revenue:1900,conversionRate:.032}]},{zone:"Footer Links",clicks:180,revenue:4200,conversionRate:.023,heatLevel:"cold",products:["product_9"],aiInsight:"Low engagement area, consider redesigning or removing underperforming links",lastUpdated:new Date,deviceBreakdown:{mobile:{clicks:110,revenue:2600,conversionRate:.024},desktop:{clicks:60,revenue:1400,conversionRate:.023},tablet:{clicks:10,revenue:200,conversionRate:.02}},timeBreakdown:{"00:00-06:00":{clicks:18,revenue:420,conversionRate:.023},"06:00-12:00":{clicks:36,revenue:840,conversionRate:.023},"12:00-18:00":{clicks:63,revenue:1470,conversionRate:.023},"18:00-24:00":{clicks:63,revenue:1470,conversionRate:.023}},productPerformance:[{productId:"prod_009",name:"Sale Items",clicks:180,revenue:4200,conversionRate:.023}]},{zone:"Sidebar Recommendations",clicks:95,revenue:3100,conversionRate:.033,heatLevel:"cold",products:["product_10","product_11"],aiInsight:"Personalized recommendations showing potential but need optimization",lastUpdated:new Date,deviceBreakdown:{mobile:{clicks:60,revenue:1950,conversionRate:.033},desktop:{clicks:30,revenue:975,conversionRate:.033},tablet:{clicks:5,revenue:175,conversionRate:.035}},timeBreakdown:{"00:00-06:00":{clicks:10,revenue:310,conversionRate:.031},"06:00-12:00":{clicks:19,revenue:620,conversionRate:.033},"12:00-18:00":{clicks:33,revenue:1085,conversionRate:.033},"18:00-24:00":{clicks:33,revenue:1085,conversionRate:.033}},productPerformance:[{productId:"prod_010",name:"Recommended 1",clicks:55,revenue:1800,conversionRate:.033},{productId:"prod_011",name:"Recommended 2",clicks:40,revenue:1300,conversionRate:.033}]}];async function s(e,n){if("GET"!==e.method)return n.status(405).json({error:"Method not allowed"});try{await new Promise(e=>setTimeout(e,120));let o=[...a],{heatLevel:r,device:c,timeRange:t}=e.query;r&&"all"!==r&&(o=o.filter(e=>e.heatLevel===r));let i=o.reduce((e,n)=>e+n.clicks,0),s=o.reduce((e,n)=>e+n.revenue,0),d=o.reduce((e,n)=>e+n.conversionRate,0)/o.length,v=o.filter(e=>"hot"===e.heatLevel).length,u=o.filter(e=>"warm"===e.heatLevel).length,l=o.filter(e=>"cold"===e.heatLevel).length,p={topPerformingZones:o.sort((e,n)=>n.revenue-e.revenue).slice(0,3).map(e=>({zone:e.zone,revenue:e.revenue,conversionRate:e.conversionRate})),devicePerformance:{mobile:{clicks:o.reduce((e,n)=>e+n.deviceBreakdown.mobile.clicks,0),revenue:o.reduce((e,n)=>e+n.deviceBreakdown.mobile.revenue,0),conversionRate:o.reduce((e,n)=>e+n.deviceBreakdown.mobile.conversionRate,0)/o.length},desktop:{clicks:o.reduce((e,n)=>e+n.deviceBreakdown.desktop.clicks,0),revenue:o.reduce((e,n)=>e+n.deviceBreakdown.desktop.revenue,0),conversionRate:o.reduce((e,n)=>e+n.deviceBreakdown.desktop.conversionRate,0)/o.length},tablet:{clicks:o.reduce((e,n)=>e+n.deviceBreakdown.tablet.clicks,0),revenue:o.reduce((e,n)=>e+n.deviceBreakdown.tablet.revenue,0),conversionRate:o.reduce((e,n)=>e+n.deviceBreakdown.tablet.conversionRate,0)/o.length}},timeAnalysis:{peakHours:"12:00-18:00",peakRevenue:o.reduce((e,n)=>e+n.timeBreakdown["12:00-18:00"].revenue,0),offPeakHours:"00:00-06:00",offPeakRevenue:o.reduce((e,n)=>e+n.timeBreakdown["00:00-06:00"].revenue,0)}},k=o.filter(e=>"cold"===e.heatLevel||e.conversionRate<.03).map(e=>({zone:e.zone,issue:e.conversionRate<.03?"Low conversion rate":"Cold zone",action:e.aiInsight,priority:e.conversionRate<.025?"high":"medium"}));return n.status(200).json({success:!0,data:{heatmap:o,metrics:{totalClicks:i,totalRevenue:s,avgConversionRate:Math.round(1e3*d)/1e3,hotZones:v,warmZones:u,coldZones:l},insights:p,recommendations:k}})}catch(e){return console.error("Heatmap API error:",e),n.status(500).json({success:!1,error:"Failed to load heatmap data"})}}let d=(0,i.M)(r,"default"),v=(0,i.M)(r,"config"),u=new c.PagesAPIRouteModule({definition:{kind:t.A.PAGES_API,page:"/api/website-analytics/heatmap",pathname:"/api/website-analytics/heatmap",bundlePath:"",filename:""},userland:r})},86435:(e,n)=>{Object.defineProperty(n,"M",{enumerable:!0,get:function(){return function e(n,o){return o in n?n[o]:"then"in n&&"function"==typeof n.then?n.then(n=>e(n,o)):"function"==typeof n&&"default"===o?n:void 0}}})}};var n=require("../../../webpack-api-runtime.js");n.C(e);var o=n(n.s=77934);module.exports=o})();