"use strict";(()=>{var e={};e.id=9178,e.ids=[9178],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return i}});var i=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,i)=>{e.exports=i(75600)},63401:(e,t,i)=>{i.r(t),i.d(t,{config:()=>l,default:()=>c,routeModule:()=>p});var r={};i.r(r),i.d(r,{default:()=>d});var o=i(33480),a=i(8667),s=i(86435);let n=[{id:"1",page:"/collections/bape",section:"Product Grid",element:"Filter Options",dropOffRate:.34,sessions:156,aiInsight:"Complex filter options are causing confusion and high drop-off rates",priority:"high",suggestedAction:"Simplify filter interface and add guided filtering",lastUpdated:new Date,deviceBreakdown:{mobile:.42,desktop:.28,tablet:.31},sourceBreakdown:{social:.38,organic:.25,paid:.45,direct:.22},userBehavior:{avgTimeOnPage:23,avgScrollDepth:45,rageClicks:12,hoverBacks:8}},{id:"2",page:"/products/limited-hoodie",section:"Product Details",element:"Size Selector",dropOffRate:.28,sessions:89,aiInsight:"Size selector lacks visual feedback and size guide integration",priority:"medium",suggestedAction:"Add size guide popup and visual size indicators",lastUpdated:new Date,deviceBreakdown:{mobile:.35,desktop:.22,tablet:.29},sourceBreakdown:{social:.32,organic:.2,paid:.38,direct:.18},userBehavior:{avgTimeOnPage:67,avgScrollDepth:78,rageClicks:5,hoverBacks:3}},{id:"3",page:"/cart",section:"Shopping Cart",element:"Checkout Button",dropOffRate:.18,sessions:234,aiInsight:"Checkout process is working well, but could benefit from trust indicators",priority:"low",suggestedAction:"Add security badges and customer testimonials",lastUpdated:new Date,deviceBreakdown:{mobile:.22,desktop:.15,tablet:.19},sourceBreakdown:{social:.25,organic:.12,paid:.28,direct:.1},userBehavior:{avgTimeOnPage:45,avgScrollDepth:92,rageClicks:2,hoverBacks:1}},{id:"4",page:"/collections/new-arrivals",section:"Product Grid",element:"Load More Button",dropOffRate:.41,sessions:78,aiInsight:"Load more functionality is causing significant user frustration",priority:"critical",suggestedAction:"Implement infinite scroll or pagination with better UX",lastUpdated:new Date,deviceBreakdown:{mobile:.48,desktop:.35,tablet:.42},sourceBreakdown:{social:.45,organic:.32,paid:.52,direct:.28},userBehavior:{avgTimeOnPage:34,avgScrollDepth:67,rageClicks:18,hoverBacks:12}},{id:"5",page:"/checkout",section:"Payment Form",element:"Payment Method Selection",dropOffRate:.15,sessions:189,aiInsight:"Payment process is smooth, but some users prefer different payment methods",priority:"medium",suggestedAction:"Add more payment options and improve mobile payment UX",lastUpdated:new Date,deviceBreakdown:{mobile:.18,desktop:.12,tablet:.16},sourceBreakdown:{social:.2,organic:.1,paid:.22,direct:.08},userBehavior:{avgTimeOnPage:89,avgScrollDepth:95,rageClicks:3,hoverBacks:2}}];async function d(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{await new Promise(e=>setTimeout(e,150));let i=[...n],{priority:r,page:o,device:a,source:s}=e.query;r&&"all"!==r&&(i=i.filter(e=>e.priority===r)),o&&(i=i.filter(e=>e.page.includes(o)));let d=i.length,c=i.reduce((e,t)=>e+t.dropOffRate,0)/d,l=i.reduce((e,t)=>e+t.sessions,0),p=i.filter(e=>"critical"===e.priority).length,u=i.filter(e=>"high"===e.priority).length,g={topDropOffPages:i.sort((e,t)=>t.dropOffRate-e.dropOffRate).slice(0,3).map(e=>({page:e.page,rate:e.dropOffRate})),deviceAnalysis:{mobile:i.reduce((e,t)=>e+t.deviceBreakdown.mobile,0)/d,desktop:i.reduce((e,t)=>e+t.deviceBreakdown.desktop,0)/d,tablet:i.reduce((e,t)=>e+t.deviceBreakdown.tablet,0)/d},sourceAnalysis:{social:i.reduce((e,t)=>e+t.sourceBreakdown.social,0)/d,organic:i.reduce((e,t)=>e+t.sourceBreakdown.organic,0)/d,paid:i.reduce((e,t)=>e+t.sourceBreakdown.paid,0)/d,direct:i.reduce((e,t)=>e+t.sourceBreakdown.direct,0)/d}},f=i.filter(e=>"critical"===e.priority||"high"===e.priority).map(e=>({page:e.page,element:e.element,action:e.suggestedAction,priority:e.priority,impact:e.dropOffRate>.3?"high":e.dropOffRate>.2?"medium":"low"}));return t.status(200).json({success:!0,data:{dropOffs:i,metrics:{totalDropOffs:d,avgDropOffRate:Math.round(100*c)/100,totalSessions:l,criticalIssues:p,highPriorityIssues:u},insights:g,recommendations:f}})}catch(e){return console.error("Drop-offs API error:",e),t.status(500).json({success:!1,error:"Failed to load drop-off data"})}}let c=(0,s.M)(r,"default"),l=(0,s.M)(r,"config"),p=new o.PagesAPIRouteModule({definition:{kind:a.A.PAGES_API,page:"/api/website-analytics/drop-offs",pathname:"/api/website-analytics/drop-offs",bundlePath:"",filename:""},userland:r})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,i){return i in t?t[i]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,i)):"function"==typeof t&&"default"===i?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var i=t(t.s=63401);module.exports=i})();