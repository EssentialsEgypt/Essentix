"use strict";(()=>{var e={};e.id=5361,e.ids=[5361],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return o}});var o=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,o)=>{e.exports=o(75600)},66684:(e,t,o)=>{o.r(t),o.d(t,{config:()=>u,default:()=>d,routeModule:()=>v});var r={};o.r(r),o.d(r,{default:()=>i});var a=o(33480),n=o(8667),c=o(86435);let s=[{productId:"prod_001",productName:"Limited Edition Hoodie",views:1250,scrollDepth:78,addToCart:89,zoomCount:156,reviewViews:234,checkouts:45,conversionRate:.036,revenue:13455,aiRecommendation:"Strong product performance. Consider featuring in homepage hero section",lastUpdated:new Date,deviceBreakdown:{mobile:{views:875,addToCart:62,checkouts:32,conversionRate:.037},desktop:{views:250,addToCart:18,checkouts:9,conversionRate:.036},tablet:{views:125,addToCart:9,checkouts:4,conversionRate:.032}},funnelStages:[{stage:"View",count:1250,rate:1},{stage:"Scroll",count:975,rate:.78},{stage:"Zoom",count:156,rate:.125},{stage:"Add to Cart",count:89,rate:.071},{stage:"Checkout",count:45,rate:.036}]},{productId:"prod_002",productName:"BAPE Tee",views:980,scrollDepth:82,addToCart:67,zoomCount:134,reviewViews:189,checkouts:38,conversionRate:.039,revenue:11500,aiRecommendation:"Good performance with room for optimization. Test different product images",lastUpdated:new Date,deviceBreakdown:{mobile:{views:686,addToCart:47,checkouts:27,conversionRate:.039},desktop:{views:196,addToCart:13,checkouts:7,conversionRate:.036},tablet:{views:98,addToCart:7,checkouts:4,conversionRate:.041}},funnelStages:[{stage:"View",count:980,rate:1},{stage:"Scroll",count:804,rate:.82},{stage:"Zoom",count:134,rate:.137},{stage:"Add to Cart",count:67,rate:.068},{stage:"Checkout",count:38,rate:.039}]},{productId:"prod_003",productName:"Sneakers",views:1100,scrollDepth:75,addToCart:72,zoomCount:198,reviewViews:267,checkouts:41,conversionRate:.037,revenue:13100,aiRecommendation:"High zoom rate indicates strong interest. Optimize product descriptions",lastUpdated:new Date,deviceBreakdown:{mobile:{views:770,addToCart:50,checkouts:29,conversionRate:.038},desktop:{views:220,addToCart:14,checkouts:8,conversionRate:.036},tablet:{views:110,addToCart:8,checkouts:4,conversionRate:.036}},funnelStages:[{stage:"View",count:1100,rate:1},{stage:"Scroll",count:825,rate:.75},{stage:"Zoom",count:198,rate:.18},{stage:"Add to Cart",count:72,rate:.065},{stage:"Checkout",count:41,rate:.037}]},{productId:"prod_004",productName:"Accessories",views:650,scrollDepth:68,addToCart:45,zoomCount:89,reviewViews:123,checkouts:28,conversionRate:.043,revenue:6800,aiRecommendation:"High conversion rate for accessories. Consider cross-selling opportunities",lastUpdated:new Date,deviceBreakdown:{mobile:{views:455,addToCart:32,checkouts:20,conversionRate:.044},desktop:{views:130,addToCart:9,checkouts:5,conversionRate:.038},tablet:{views:65,addToCart:4,checkouts:3,conversionRate:.046}},funnelStages:[{stage:"View",count:650,rate:1},{stage:"Scroll",count:442,rate:.68},{stage:"Zoom",count:89,rate:.137},{stage:"Add to Cart",count:45,rate:.069},{stage:"Checkout",count:28,rate:.043}]},{productId:"prod_005",productName:"New Arrivals",views:890,scrollDepth:71,addToCart:58,zoomCount:145,reviewViews:178,checkouts:32,conversionRate:.036,revenue:5200,aiRecommendation:"Moderate performance. Test different product positioning and pricing",lastUpdated:new Date,deviceBreakdown:{mobile:{views:623,addToCart:41,checkouts:23,conversionRate:.037},desktop:{views:178,addToCart:12,checkouts:6,conversionRate:.034},tablet:{views:89,addToCart:5,checkouts:3,conversionRate:.034}},funnelStages:[{stage:"View",count:890,rate:1},{stage:"Scroll",count:632,rate:.71},{stage:"Zoom",count:145,rate:.163},{stage:"Add to Cart",count:58,rate:.065},{stage:"Checkout",count:32,rate:.036}]}];async function i(e,t){if("GET"!==e.method)return t.status(405).json({error:"Method not allowed"});try{await new Promise(e=>setTimeout(e,130));let o=[...s],{productId:r,device:a,conversionRate:n}=e.query;if(r&&(o=o.filter(e=>e.productId===r)),a&&"all"!==a&&(o=o.map(e=>({...e,deviceBreakdown:{[a]:e.deviceBreakdown[a]}}))),n){let e=parseFloat(n);o=o.filter(t=>t.conversionRate>=e)}let c=o.length,i=o.reduce((e,t)=>e+t.views,0),d=o.reduce((e,t)=>e+t.revenue,0),u=o.reduce((e,t)=>e+t.conversionRate,0)/c,v=o.reduce((e,t)=>e+t.scrollDepth,0)/c,l={topPerformingProducts:o.sort((e,t)=>t.revenue-e.revenue).slice(0,3).map(e=>({name:e.productName,revenue:e.revenue,conversionRate:e.conversionRate})),highConversionProducts:o.filter(e=>e.conversionRate>.04).map(e=>({name:e.productName,conversionRate:e.conversionRate})),lowConversionProducts:o.filter(e=>e.conversionRate<.035).map(e=>({name:e.productName,conversionRate:e.conversionRate})),devicePerformance:{mobile:{totalViews:o.reduce((e,t)=>e+t.deviceBreakdown.mobile.views,0),avgConversionRate:o.reduce((e,t)=>e+t.deviceBreakdown.mobile.conversionRate,0)/c},desktop:{totalViews:o.reduce((e,t)=>e+t.deviceBreakdown.desktop.views,0),avgConversionRate:o.reduce((e,t)=>e+t.deviceBreakdown.desktop.conversionRate,0)/c},tablet:{totalViews:o.reduce((e,t)=>e+t.deviceBreakdown.tablet.views,0),avgConversionRate:o.reduce((e,t)=>e+t.deviceBreakdown.tablet.conversionRate,0)/c}}},p=o.filter(e=>e.conversionRate<.035).map(e=>({productId:e.productId,productName:e.productName,issue:"Low conversion rate",action:e.aiRecommendation,priority:e.conversionRate<.03?"high":"medium"}));return t.status(200).json({success:!0,data:{productFunnels:o,metrics:{totalProducts:c,totalViews:i,totalRevenue:d,avgConversionRate:Math.round(1e3*u)/1e3,avgScrollDepth:Math.round(v)},insights:l,recommendations:p}})}catch(e){return console.error("Product funnels API error:",e),t.status(500).json({success:!1,error:"Failed to load product funnel data"})}}let d=(0,c.M)(r,"default"),u=(0,c.M)(r,"config"),v=new a.PagesAPIRouteModule({definition:{kind:n.A.PAGES_API,page:"/api/website-analytics/product-funnels",pathname:"/api/website-analytics/product-funnels",bundlePath:"",filename:""},userland:r})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var o=t(t.s=66684);module.exports=o})();