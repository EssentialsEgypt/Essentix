"use strict";(()=>{var e={};e.id=583,e.ids=[583],e.modules={8667:(e,r)=>{Object.defineProperty(r,"A",{enumerable:!0,get:function(){return t}});var t=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},12541:(e,r,t)=>{t.d(r,{A:()=>n});let n=(0,require("@supabase/supabase-js").createClient)("https://placeholder.supabase.co","placeholder-anon-key",{auth:{persistSession:!0}})},33480:(e,r,t)=>{e.exports=t(75600)},60992:(e,r,t)=>{t.r(r),t.d(r,{config:()=>l,default:()=>u,routeModule:()=>c});var n={};t.r(n),t.d(n,{default:()=>d});var a=t(33480),s=t(8667),o=t(86435),i=t(12541);async function d(e,r){try{let e=new Date(Date.now()-72e5).toISOString(),{data:t,error:n}=await i.A.from("dms").select("id, user_id, created_at, replied").lt("created_at",e).eq("replied",!1);if(n)return console.error("Error fetching DMs:",n),r.status(500).json({error:"Error fetching DMs"});for(let e of t||[]){let{data:r,error:t}=await i.A.from("alerts").select("id").eq("user_id",e.user_id).eq("type","dm_unanswered").eq("message",`ðŸ”´ Unanswered DM from ${e.id} pending for more than 2 hours`).single();r||t||await i.A.from("alerts").insert({user_id:e.user_id,type:"dm_unanswered",platform:"internal",message:`ðŸ”´ Unanswered DM from ${e.id} pending for more than 2 hours`,status:"pending"})}r.status(200).json({message:"Alerts check completed"})}catch(e){console.error("Error in alerts check:",e),r.status(500).json({error:"Internal server error"})}}let u=(0,o.M)(n,"default"),l=(0,o.M)(n,"config"),c=new a.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/alerts/check",pathname:"/api/alerts/check",bundlePath:"",filename:""},userland:n})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,r)=>{Object.defineProperty(r,"M",{enumerable:!0,get:function(){return function e(r,t){return t in r?r[t]:"then"in r&&"function"==typeof r.then?r.then(r=>e(r,t)):"function"==typeof r&&"default"===t?r:void 0}}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var t=r(r.s=60992);module.exports=t})();