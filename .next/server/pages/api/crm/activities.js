"use strict";(()=>{var e={};e.id=8323,e.ids=[8323],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return i}});var i=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,i)=>{e.exports=i(75600)},36951:(e,t,i)=>{i.r(t),i.d(t,{config:()=>u,default:()=>l,routeModule:()=>c});var o={};i.r(o),i.d(o,{default:()=>r});var n=i(33480),s=i(8667),a=i(86435);let d=[{id:"act_001",type:"call",lead:"Ahmed Hassan",date:"2024-01-20",duration:30,notes:"Discussed proposal details and timeline",outcome:"Positive",nextAction:"Send follow-up email with ROI calculation",aiInsights:{sentiment:"Positive",priority:"High",recommendedFollowUp:"Schedule demo within 48 hours"}},{id:"act_002",type:"meeting",lead:"Mohamed Ali",date:"2024-01-23",duration:60,notes:"Contract negotiation and final terms discussion",outcome:"Very Positive",nextAction:"Prepare contract for signing",aiInsights:{sentiment:"Very Positive",priority:"Critical",recommendedFollowUp:"Send contract immediately"}},{id:"act_003",type:"email",lead:"Sara Mahmoud",date:"2024-01-22",duration:5,notes:"Sent initial proposal and pricing information",outcome:"Neutral",nextAction:"Follow up with discovery call",aiInsights:{sentiment:"Neutral",priority:"Medium",recommendedFollowUp:"Schedule discovery call this week"}},{id:"act_004",type:"call",lead:"Ahmed Hassan",date:"2024-01-18",duration:45,notes:"Initial discovery call - discussed pain points and requirements",outcome:"Positive",nextAction:"Send detailed proposal",aiInsights:{sentiment:"Positive",priority:"High",recommendedFollowUp:"Send proposal within 24 hours"}},{id:"act_005",type:"meeting",lead:"Sara Mahmoud",date:"2024-01-21",duration:30,notes:"Qualification call - confirmed budget and decision timeline",outcome:"Positive",nextAction:"Send pricing guide and case studies",aiInsights:{sentiment:"Positive",priority:"Medium",recommendedFollowUp:"Send relevant case studies"}}];function r(e,t){if("GET"===e.method){let{lead:i,type:o,outcome:n,dateFrom:s,dateTo:a}=e.query,r=[...d];i&&(r=r.filter(e=>e.lead===i)),o&&(r=r.filter(e=>e.type===o)),n&&(r=r.filter(e=>e.outcome===n)),s&&(r=r.filter(e=>e.date>=s.toString())),a&&(r=r.filter(e=>e.date<=a.toString())),r.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()),t.status(200).json({success:!0,data:r,total:r.length,summary:{totalDuration:r.reduce((e,t)=>e+t.duration,0),averageDuration:Math.round(r.reduce((e,t)=>e+t.duration,0)/r.length),positiveOutcomes:r.filter(e=>e.outcome.includes("Positive")).length,activitiesByType:r.reduce((e,t)=>(e[t.type]=(e[t.type]||0)+1,e),{})}})}else if("POST"===e.method){let i={id:`act_${Date.now()}`,...e.body,aiInsights:{sentiment:"Positive"===e.body.outcome||"Very Positive"===e.body.outcome?"Positive":"Neutral",priority:e.body.duration>30?"High":"Medium",recommendedFollowUp:"Schedule follow-up based on outcome"}};d.push(i),t.status(201).json({success:!0,data:i,message:"Activity created successfully"})}else if("PUT"===e.method){let{id:i}=e.query,o=d.findIndex(e=>e.id===i);if(-1===o)return t.status(404).json({error:"Activity not found"});d[o]={...d[o],...e.body},t.status(200).json({success:!0,data:d[o],message:"Activity updated successfully"})}else if("DELETE"===e.method){let{id:i}=e.query,o=d.findIndex(e=>e.id===i);if(-1===o)return t.status(404).json({error:"Activity not found"});d.splice(o,1),t.status(200).json({success:!0,message:"Activity deleted successfully"})}else t.setHeader("Allow",["GET","POST","PUT","DELETE"]),t.status(405).json({error:"Method not allowed"})}let l=(0,a.M)(o,"default"),u=(0,a.M)(o,"config"),c=new n.PagesAPIRouteModule({definition:{kind:s.A.PAGES_API,page:"/api/crm/activities",pathname:"/api/crm/activities",bundlePath:"",filename:""},userland:o})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,i){return i in t?t[i]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,i)):"function"==typeof t&&"default"===i?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var i=t(t.s=36951);module.exports=i})();