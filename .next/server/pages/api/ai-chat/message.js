"use strict";(()=>{var e={};e.id=1876,e.ids=[1876],e.modules={8667:(e,t)=>{Object.defineProperty(t,"A",{enumerable:!0,get:function(){return a}});var a=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},33480:(e,t,a)=>{e.exports=a(75600)},40317:(e,t,a)=>{a.r(t),a.d(t,{config:()=>y,default:()=>f,routeModule:()=>h});var n={};a.r(n),a.d(n,{default:()=>o});var r=a(33480),i=a(8667),s=a(86435);async function o(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});try{let{content:a,sessionId:n,agents:r,scenario:i,language:s}=e.body;if(!a)return t.status(400).json({error:"Message content is required"});let o=await c(a,r,i,s);await m(n,"user",a),await m(n,"ai",o.content,o.agentName),t.status(200).json(o)}catch(e){console.error("AI Chat API Error:",e),t.status(500).json({error:"Internal server error"})}}async function c(e,t,a,n){await new Promise(e=>setTimeout(e,1e3));let r=await u(e),i=await d(e),s=await l(e),o=await p(s),c="",m="AI Assistant";if(t&&2===t.length){let e=g(t[0]),a=g(t[1]);c=`${r}${i}${e.displayName} and ${a.displayName} are collaborating on this scenario. ${e.displayName} suggests optimizing the targeting, while ${a.displayName} recommends refreshing the creative. Together, they recommend a 20% budget increase with new creative rotation.`,m=`${e.displayName} + ${a.displayName}`}else c=function(e,t,a,n){let r=e.toLowerCase();return r.includes("roas")?`${t}${a}Your ROAS is currently at 3.8, which is good but could be optimized. I recommend testing new creatives and adjusting the budget allocation.`:r.includes("creative")?`${t}I detect some creative fatigue. Your current creatives have been running for 7 days. I suggest refreshing with 3 new variations and testing different hooks.`:r.includes("budget")?`${t}${a}Your current spend is $2,450. I recommend reallocating 30% to your top-performing ad sets and testing new audiences.`:r.includes("launch")||r.includes("drop")?`${t}${a}Based on your audience behavior, the best time to launch would be Friday at 6 PM. I recommend preparing 5 creatives and setting a $1,500 initial budget.`:`${t}${a}I can help you with campaign optimization, creative strategy, budget planning, and more. What specific aspect would you like to focus on?`}(e,r,i,0);return{content:c,agentName:m,metadata:{scenario:a,agents:t},functionCalls:s,toolResults:o,memory:r}}async function u(e){let t=e.toLowerCase();return t.includes("roas")||t.includes("performance")?"Based on your previous campaigns, I remember your Fear of God drop had 9 creatives and achieved 4.2 ROAS. ":t.includes("creative")||t.includes("ad")?"I recall your last creative refresh was 7 days ago, and the current creatives are showing fatigue signs. ":t.includes("budget")||t.includes("spend")?"From your recent campaigns, I remember you typically allocate 40% to top-performing ad sets. ":""}async function d(e){return`Current ROAS: 3.8, CTR: 2.1%, Spend: $${2450..toLocaleString()}. `}async function l(e){let t=[];return(e.toLowerCase().includes("roas")||e.toLowerCase().includes("performance"))&&t.push({name:"get_campaign_performance",arguments:{campaign_id:"camp_123",metrics:["roas","ctr","spend"]}}),e.toLowerCase().includes("creative")&&t.push({name:"get_creative_performance",arguments:{creative_ids:["cre_456","cre_789"],metrics:["ctr","engagement"]}}),t}async function p(e){let t=[];for(let a of e)"get_campaign_performance"===a.name?t.push({tool:"meta_ads_api",result:{roas:3.8,ctr:2.1,spend:2450,impressions:12500}}):"get_creative_performance"===a.name&&t.push({tool:"creative_analytics",result:{ctr:2.1,engagement:4.5,fatigue_score:.7}});return t}function g(e){return({ad_expert:{displayName:"Ad Expert Agent",description:"Analyzes Meta/Google Ads performance"},budget_planner:{displayName:"Budget Planner Agent",description:"Optimizes budget allocation"},creative_strategist:{displayName:"Creative Strategist Agent",description:"Optimizes hooks and visuals"},data_analyst:{displayName:"Data Analyst Agent",description:"Finds patterns across campaigns"},launch_strategist:{displayName:"Launch Strategist Agent",description:"Plans drop calendars"},funnel_fixer:{displayName:"Funnel Fixer Agent",description:"Analyzes conversion funnels"}})[e]||{displayName:"Unknown Agent",description:""}}async function m(e,t,a,n){console.log("Storing message:",{sessionId:e,type:t,content:a,agentName:n})}let f=(0,s.M)(n,"default"),y=(0,s.M)(n,"config"),h=new r.PagesAPIRouteModule({definition:{kind:i.A.PAGES_API,page:"/api/ai-chat/message",pathname:"/api/ai-chat/message",bundlePath:"",filename:""},userland:n})},75600:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},86435:(e,t)=>{Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var a=t(t.s=40317);module.exports=a})();